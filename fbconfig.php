<?phperror_reporting(E_ALL);ini_set('display_errors', 1);session_start();// added in v4.0.0require_once 'autoload.php';use Facebook\FacebookSession;use Facebook\FacebookRedirectLoginHelper;use Facebook\FacebookRequest;use Facebook\FacebookResponse;use Facebook\FacebookSDKException;use Facebook\FacebookRequestException;use Facebook\FacebookAuthorizationException;use Facebook\GraphObject;use Facebook\Entities\AccessToken;use Facebook\HttpClients\FacebookCurlHttpClient;use Facebook\HttpClients\FacebookHttpable;// init app with app id and secret//FacebookSession::setDefaultApplication( '373055346370094','7673568cfce1d6866cc70a878d943764' );FacebookSession::setDefaultApplication( '1315503555201857','de14316d764f557ad4df693dd20de58a' );// login helper with redirect_uri    $helper = new FacebookRedirectLoginHelper('https://artists.tourismhq.com/fbconfig.php' );    try {  $session = $helper->getSessionFromRedirect();} catch( FacebookRequestException $ex ) {    print_r($ex);  // When Facebook returns an error} catch( Exception $ex ) {    print_r($ex);  // When validation fails or other local issues}// see if we have a sessionif ( isset( $session ) ) {  // graph api request for user data  $request = new FacebookRequest( $session, 'GET', '/me' );  $response = $request->execute();  // get response  $graphObject = $response->getGraphObject();     	$fbid = $graphObject->getProperty('id');              // To Get Facebook ID 	    $fbfullname = $graphObject->getProperty('name'); // To Get Facebook full name	    $femail = $graphObject->getProperty('email');    // To Get Facebook email ID                require 'functions.php'; // Include functions    checkuser($fbid,$fbfullname,$femail); // To update local	/* ---- Session Variables -----*/	    $_SESSION['FBID'] = $fbid;                   $_SESSION['FULLNAME'] = $fbfullname;	    $_SESSION['EMAIL'] =  $femail;    /* ---- header location after session ----*/  header("Location: dashboard.php");} else {  $loginUrl = $helper->getLoginUrl(); header("Location: ".$loginUrl);}?>